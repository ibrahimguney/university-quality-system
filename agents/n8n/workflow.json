{
  "name": "Create Quality Issues 3 Weeks Before Term",
  "nodes": [
    {
      "parameters": {
        "triggerTimes": {
          "item": [
            {
              "hour": 9,
              "minute": 0
            }
          ]
        }
      },
      "id": "Cron1",
      "name": "Cron (Daily 09:00 TR)",
      "type": "n8n-nodes-base.cron",
      "typeVersion": 2,
      "position": [240, 260]
    },
    {
      "parameters": {
        "values": {
          "string": [
            { "name": "OWNER", "value": "your-github-username-or-org" },
            { "name": "REPO", "value": "university-quality-system" },
            { "name": "TERM_START", "value": "2025-09-22T09:00:00+03:00" }
          ]
        }
      },
      "id": "SetConfig",
      "name": "Config",
      "type": "n8n-nodes-base.set",
      "typeVersion": 2,
      "position": [480, 260]
    },
    {
      "parameters": {
        "functionCode": "const termStart = new Date($json[\"TERM_START\"]);\nconst now = new Date();\n// TR saat dilimi farklarÄ±nÄ± tolere etmek iÃ§in sadece gÃ¼n bazÄ±nda farkÄ± hesapla\nconst msPerDay = 24*60*60*1000;\nconst diffDays = Math.floor((termStart - now) / msPerDay);\nreturn [{ json: { shouldCreate: diffDays === 21, diffDays } }];"
      },
      "id": "FnCheck21Days",
      "name": "Check (21 days before?)",
      "type": "n8n-nodes-base.function",
      "typeVersion": 2,
      "position": [720, 260]
    },
    {
      "parameters": {
        "conditions": {
          "boolean": [{ "value1": "={{$json[\"shouldCreate\"]}}", "operation": "isTrue" }]
        }
      },
      "id": "IfGate",
      "name": "IF shouldCreate",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [960, 260]
    },
    {
      "parameters": {
        "functionCode": "const issues = [\n  {\n    title: \"[To Do] Ders planlarÄ± ve syllabus gÃ¼ncellemesi\",\n    body: `## ðŸŽ¯ GÃ¶rev\\nTÃ¼m ders planlarÄ±nÄ±n ve syllabus belgelerinin yeni dÃ¶neme uygun ÅŸekilde gÃ¼ncellenmesi.\\nBologna Ã§Ä±ktÄ±larÄ± ile Ã¶lÃ§me yÃ¶ntemleri uyumu kontrol edilecek.\\n\\n## âœ… YapÄ±lacaklar\\n- [ ] Program ders listelerinin kontrol edilmesi\\n- [ ] Syllabus dosyalarÄ±nÄ±n gÃ¼ncellenmesi\\n- [ ] OBÄ°S/LMS sistemine yÃ¼klenmesi\\n\\n## ðŸ‘¥ Sorumlu\\n- FakÃ¼lte/Program BaÅŸkanlÄ±ÄŸÄ±\\n- Dersin ilgili Ã¶ÄŸretim elemanÄ±\\n\\n## â° Hedef Tarih\\nDÃ¶nem baÅŸlamadan 3 hafta â€“ **KesinleÅŸtirme 1 hafta kala**`,\n    labels: [\"To Do\", \"Kalite\"]\n  },\n  {\n    title: \"[To Do] Akademik danÄ±ÅŸmanlÄ±k planlarÄ±nÄ±n gÃ¼ncellenmesi\",\n    body: `## ðŸŽ¯ GÃ¶rev\\nDanÄ±ÅŸman-Ã¶ÄŸrenci eÅŸleÅŸtirmelerinin yapÄ±lmasÄ± ve danÄ±ÅŸmanlÄ±k sÃ¼reÃ§lerinin netleÅŸtirilmesi.\\n\\n## âœ… YapÄ±lacaklar\\n- [ ] DanÄ±ÅŸman atama listelerinin gÃ¼ncellenmesi\\n- [ ] DanÄ±ÅŸmanlÄ±k formlarÄ±nÄ±n hazÄ±rlanmasÄ±\\n- [ ] Ã–ÄŸrencilere duyuru yapÄ±lmasÄ±\\n\\n## ðŸ‘¥ Sorumlu\\n- FakÃ¼lte sekreterliÄŸi\\n- BÃ¶lÃ¼m baÅŸkanlarÄ±\\n\\n## â° Hedef Tarih\\nDÃ¶nem baÅŸlamadan 3 hafta Ã¶nce`,\n    labels: [\"To Do\", \"DanÄ±ÅŸmanlÄ±k\"]\n  },\n  {\n    title: \"[To Do] Ã–ÄŸrenci oryantasyon programÄ± planlama\",\n    body: `## ðŸŽ¯ GÃ¶rev\\nYeni kayÄ±tlÄ± Ã¶ÄŸrenciler iÃ§in tanÄ±tÄ±m ve kalite farkÄ±ndalÄ±ÄŸÄ± oryantasyonu hazÄ±rlamak.\\n\\n## âœ… YapÄ±lacaklar\\n- [ ] Program takviminin hazÄ±rlanmasÄ±\\n- [ ] Akademik birimlerin sunum iÃ§eriklerinin hazÄ±rlanmasÄ±\\n- [ ] Kalite gÃ¼vence sistemi hakkÄ±nda bilgilendirme eklenmesi\\n\\n## ðŸ‘¥ Sorumlu\\n- Ã–ÄŸrenci iÅŸleri dairesi\\n- FakÃ¼lte kalite temsilcileri\\n\\n## â° Hedef Tarih\\nDÃ¶nem baÅŸlamadan 2 hafta Ã¶nce`,\n    labels: [\"To Do\", \"Oryantasyon\"]\n  },\n  {\n    title: \"[To Do] GeÃ§en dÃ¶nem anket sonuÃ§larÄ±nÄ±n analizi\",\n    body: `## ðŸŽ¯ GÃ¶rev\\n2024â€“25 bahar yarÄ±yÄ±lÄ± anket ve Ã¶ÄŸrenci baÅŸarÄ±sÄ± verilerini analiz ederek iyileÅŸtirme planÄ± oluÅŸturmak.\\n\\n## âœ… YapÄ±lacaklar\\n- [ ] Ã–ÄŸrenci ders deÄŸerlendirme sonuÃ§larÄ±nÄ± analiz et\\n- [ ] Akademik performans gÃ¶stergelerini Ã§Ä±kar\\n- [ ] Ä°yileÅŸtirme Ã¶nerileri raporunu hazÄ±rla\\n\\n## ðŸ‘¥ Sorumlu\\n- Kalite komisyonu\\n- Akademik deÄŸerlendirme birimi\\n\\n## â° Hedef Tarih\\nGÃ¼z yarÄ±yÄ±lÄ± baÅŸlamadan 3 hafta Ã¶nce`,\n    labels: [\"To Do\", \"Anket Analizi\"]\n  },\n  {\n    title: \"[To Do] PUKÃ– dÃ¶ngÃ¼sÃ¼ iyileÅŸtirme eylem planÄ± hazÄ±rlama\",\n    body: `## ðŸŽ¯ GÃ¶rev\\nÃ–nceki yÄ±l alÄ±nan kararlarÄ±n etkilerini deÄŸerlendirmek ve yeni dÃ¶nem iÃ§in dÃ¼zeltici faaliyet planÄ± oluÅŸturmak.\\n\\n## âœ… YapÄ±lacaklar\\n- [ ] Ã–nceki yÄ±l â€œKontrolâ€ aÅŸamasÄ± Ã§Ä±ktÄ±larÄ±nÄ±n incelenmesi\\n- [ ] Eksik veya zayÄ±f noktalarÄ±n belirlenmesi\\n- [ ] Yeni dÃ¶nem iÃ§in dÃ¼zeltici faaliyetlerin planlanmasÄ±\\n\\n## ðŸ‘¥ Sorumlu\\n- FakÃ¼lte kalite kurulu\\n- BÃ¶lÃ¼m kalite temsilcileri\\n\\n## â° Hedef Tarih\\nDÃ¶nem baÅŸlamadan 2 hafta Ã¶nce`,\n    labels: [\"To Do\", \"PUKÃ–\"]\n  }\n];\nreturn issues.map(i => ({ json: i }));"
      },
      "id": "FnPrepareIssues",
      "name": "Prepare Issues",
      "type": "n8n-nodes-base.function",
      "typeVersion": 2,
      "position": [1160, 140]
    },
    {
      "parameters": {
        "owner": "={{$json[\"OWNER\"]}}",
        "repository": "={{$json[\"REPO\"]}}",
        "title": "={{$json[\"title\"]}}",
        "body": "={{$json[\"body\"]}}",
        "additionalFields": {
          "labels": "={{$json[\"labels\"]}}"
        },
        "resource": "issue",
        "operation": "create"
      },
      "id": "GitHubCreateIssue",
      "name": "GitHub â†’ Create Issue",
      "type": "n8n-nodes-base.github",
      "typeVersion": 2,
      "position": [1480, 140],
      "credentials": {
        "githubApi": {
          "id": "REPLACE_WITH_YOUR_GITHUB_CREDENTIAL_ID",
          "name": "GitHub (PAT)"
        }
      }
    },
    {
      "parameters": {},
      "id": "Noop",
      "name": "No-Op (Not 21 days)",
      "type": "n8n-nodes-base.noOp",
      "typeVersion": 1,
      "position": [1160, 360]
    }
  ],
  "connections": {
    "Cron (Daily 09:00 TR)": {
      "main": [[{ "node": "Config", "type": "main", "index": 0 }]]
    },
    "Config": {
      "main": [[{ "node": "Check (21 days before?)", "type": "main", "index": 0 }]]
    },
    "Check (21 days before?)": {
      "main": [
        [
          { "node": "IF shouldCreate", "type": "main", "index": 0 }
        ]
      ]
    },
    "IF shouldCreate": {
      "main": [
        [
          { "node": "Prepare Issues", "type": "main", "index": 0 }
        ],
        [
          { "node": "No-Op (Not 21 days)", "type": "main", "index": 0 }
        ]
      ]
    },
    "Prepare Issues": {
      "main": [[{ "node": "GitHub â†’ Create Issue", "type": "main", "index": 0 }]]
    }
  }
}
